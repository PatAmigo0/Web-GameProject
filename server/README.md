# üõ† –°–µ—Ä–≤–µ—Ä –∏ –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É **Single Docker Image**. –ü—Ä–∏ —Å–±–æ—Ä–∫–µ Frontend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –∏ –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä—å —Å–µ—Ä–≤–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –∑–∞—Ç–µ–º —Ä–∞–∑–¥–∞–µ—Ç –µ–≥–æ –∫–∞–∫ —Å—Ç–∞—Ç–∏–∫—É. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –º–∏–≥—Ä–∞—Ü–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–í–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ:

- **Docker Desktop** (—Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Docker Compose)

–õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Node.js / pnpm **–Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è**.

---

## ‚öôÔ∏è –ó–∞–ø—É—Å–∫ (Docker Compose)

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –ø–∞–ø–∫–µ `server/` —Å–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` (–µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç), –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–∏–º–µ—Ä –Ω–∏–∂–µ. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å `docker-compose.yaml`.

–ü—Ä–∏–º–µ—Ä `.env`:

```env
PORT=2567
NODE_ENV=production
# –•–æ—Å—Ç—ã —É–∫–∞–∑—ã–≤–∞—é—Ç –Ω–∞ –∏–º–µ–Ω–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ Docker —Å–µ—Ç–∏
DATABASE_URL="postgresql://admin:3120@postgres/game_db_prod?schema=public"
REDIS_HOST="redis"
JWT_SECRET="–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á"
ADMIN_PASSWORD=1234
```

### 2. –ó–∞–ø—É—Å–∫

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å—Ç–µ–∫:

```bash
cd server
docker-compose up -d
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞:

1.  –°–∫–∞—á–∞–µ—Ç (–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–æ–∫–∞–ª—å–Ω—ã–π) –æ–±—Ä–∞–∑ `game_server`.
2.  –ó–∞–ø—É—Å—Ç–∏—Ç **PostgreSQL** –∏ **Redis**.
3.  –ó–∞–ø—É—Å—Ç–∏—Ç **Game Server**.
4.  –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (—Å–∫—Ä–∏–ø—Ç `entrypoint.sh`).

### 3. –ò–≥—Ä–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ –∞–¥—Ä–µ—Å—É:
üëâ **http://localhost:2567**

_(–°–µ—Ä–≤–µ—Ä Colyseus —Ä–∞–∑–¥–∞–µ—Ç —Å–±–∏–ª–∂–µ–Ω–Ω—ã–π –∫–ª–∏–µ–Ω—Ç –ø–æ —ç—Ç–æ–º—É –ø–æ—Ä—Ç—É)_

---

## üì¶ –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞ (–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–¥–∞)

–í `docker-compose.yaml` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–≥ –æ–±—Ä–∞–∑–∞ (`tohun/game-server:beta`). –ï—Å–ª–∏ –≤—ã –≤–Ω–µ—Å–ª–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥ (–∫–ª–∏–µ–Ω—Ç–∞ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä–∞), –≤–∞–º –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑ –ª–æ–∫–∞–ª—å–Ω–æ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É.

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É **–∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞** (–≥–¥–µ –ª–µ–∂–∏—Ç `pnpm-workspace.yaml`):

```bash
docker build -t tohun/game-server:beta -f server/Dockerfile .
```

–ü–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –∫–æ–º–ø–æ–∑:

```bash
cd server
docker-compose down
docker-compose up -d
```

---

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è):

```bash
docker-compose logs -f game_server
```

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã:

```bash
docker-compose down
```

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (—É–¥–∞–ª–∏—Ç—å volumes):

```bash
docker-compose down -v
```
