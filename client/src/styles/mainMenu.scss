@use 'components/variables' as *;
@use 'components/mixins' as *;

.mainmenu-container {
	@include fullscreen-pns;
	pointer-events: auto; // Меню должно быть кликабельным везде
	display: block; // Для абсолютного позиционирования элементов внутри

	// --- НАСТРОЙКИ ---
	.settings-btn {
		position: absolute;
		top: $safe-padding-y;
		right: $safe-padding-x;

		background: $bg-dark;
		border: 2px solid #9c9c9c;
		padding: 8px 12px;
		border-radius: 8px;
		font-size: 24px;
		cursor: pointer;
		transition: all 0.2s;
		z-index: $z-ui-top;

		&:hover {
			transform: rotate(8deg);
			border-color: $accent-color;
		}
	}

	// --- НИКНЕЙМ ---
	.nickname-box {
		position: absolute;
		bottom: $safe-padding-y;
		left: $safe-padding-x;
		z-index: $z-ui-top;

		// Оформление самого блока с ником
		background: $bg-darker;
		border: 2px solid rgb(82, 82, 82);
		border-radius: 8px;
		min-width: 200px; // Фиксируем мин. ширину, чтобы меню не было узким
		cursor: pointer;
		transition: all 0.2s;

		// --- ЛОГИКА HOVER (ПОКАЗАТЬ МЕНЮ) ---
		&:hover {
			border-color: $accent-color;

			// Показываем меню при наведении на весь блок
			.user-dropdown {
				opacity: 1;
				pointer-events: auto;
				transform: translateY(0);
			}

			.dropdown-arrow {
				color: $accent-color;
				transform: rotate(180deg); // Переворачиваем стрелку
			}
		}

		// Внутренний контент (текст ника)
		.current-user-content {
			padding: 10px 16px;
			display: flex;
			justify-content: space-between;
			align-items: center;
			color: $text-color;
			font-size: 18px;

			#player-nickname {
				@include neon-text;
				margin-left: 5px;
			}

			.dropdown-arrow {
				font-size: 12px;
				color: #888;
				margin-left: 10px;
				transition: transform 0.3s;
			}
		}

		// --- ВЫПАДАЮЩЕЕ ОКНО ---
		.user-dropdown {
			$gap: 12px;

			position: absolute;
			// Меню "растет" вверх от родителя
			bottom: 100%;
			left: -2px; // Компенсация border родителя (-2px)
			width: calc(100% + 4px); // Компенсация border (100% + 4px)

			gap: $gap; // Отступ от основного блока
			margin-bottom: $gap;

			background: rgba(30, 30, 30, 0.95);
			border: 2px solid #555;
			border-radius: 8px;
			padding: 5px;

			display: flex;
			flex-direction: column;

			// Анимация появления
			opacity: 0;
			pointer-events: none;
			transform: translateY($gap);
			transition: all 0.3s ease;

			box-shadow: 0 -5px 20px rgba(0, 0, 0, 0.5);

			// Кнопки внутри меню
			.dropdown-btn {
				width: 100%;
				background: transparent;
				border: none;
				color: #fff;
				padding: 10px;
				text-align: left;
				font-family: $font-stack;
				font-size: 16px;
				cursor: pointer;
				border-radius: 4px;
				transition: background 0.2s;
				font-weight: bold;

				&:hover {
					background: rgba(255, 255, 255, 0.1);
					color: $accent-color;
				}

				// Кнопка "Выйти" с красноватым оттенком при наведении
				&.logout:hover {
					color: $error-color;
					background: rgba(255, 68, 68, 0.1);
				}
			}

			&::after {
				content: '';
				position: absolute;

				top: 100%;
				left: 0;
				width: 100%;

				height: $gap;

				background: transparent;
			}
		}
	}

	// --- ЦЕНТРАЛЬНЫЙ БЛОК ---
	.center-content {
		position: absolute;
		top: 50%;
		left: 50%;
		transform: translate(-50%, -50%);

		display: flex;
		flex-direction: column;
		align-items: center;
		width: 100%;
		max-width: 500px;
		z-index: 15;

		.logo {
			font-size: 86px;
			font-weight: bold;
			color: #fff;
			text-shadow: 0 0 10px rgba(255, 255, 255, 0.6), 0 0 20px rgba(255, 255, 255, 0.4);
			letter-spacing: 5px;
			margin-bottom: 50px;
			text-transform: uppercase;
			white-space: nowrap;
		}

		.main-buttons-wrapper {
			width: 100%;
			position: relative;
			display: flex;
			flex-direction: column;
			align-items: center;
			min-height: 200px;
			gap: 20px; // Отступ между кнопками

			.btn {
				width: 100%;
				height: 70px;
				font-size: 28px;
				font-weight: bold;
				background: $bg-dark;
				color: #fff;
				border: 3px solid $border-light;
				border-radius: 10px;
				cursor: pointer;
				transition: all 0.3s ease;
				z-index: 10;

				&:hover {
					background: rgba(50, 50, 50, 0.9);
					transform: scale(1.05);
				}
			}

			.expanded-container {
				width: 100%;
				position: absolute;
				top: 80px;

				display: none;
				flex-direction: column;
				align-items: center;

				.sub-btn {
					width: 90%;
					height: 60px;
					margin: 10px auto 0;
					font-size: 20px;
					font-weight: bold;
					background: rgba(40, 40, 40, 0.95);
					color: white;
					border: 2px solid #fff;
					border-radius: 8px;
					cursor: pointer;
					transition: all 0.3s ease;
					opacity: 0;
					transform: translateY(-20px);

					&.visible {
						opacity: 1;
						transform: translateY(0);
					}
					&:hover {
						transform: scale(1.05);
						border-color: $accent-color;
					}
				}
			}
		}
	}
}
